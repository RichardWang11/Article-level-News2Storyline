We wish to organized the news article to structured storyline.
We do a lot of tasks about mining the semantic of raw text, and try to figure out what relations between this sentences.
Here are same of examples:
| id | topic | task | source | url |
|----|-------|------|--------|-----|
| 0 |新冠疫情| 新冠疫情文本清洗和去重| 新闻网站|——|
| 1 |新冠疫情|政策与新冠疫情事件语义相似度|新闻网站|——|
| 2 |新冠疫情|政策与新冠疫情事件语义搜索|新闻网站|——|
| 3 |新冠疫情|新冠疫情文本语义角色标注|新闻网站&LTP|——|
| 4 |新冠疫情|新冠疫情新闻故事脉络生成|新闻网站&BERT&聚类|——|

#第一阶段，文本清洗和去重，其中去重部分主要包括新闻内容重复（计算文本的相似度）。
#第二阶段，政府发行的新冠政策（如二十条），与爬取到的新冠疫情主题事件之间的语义相似度。
#第三阶段，政府发行的新冠政策（如二十条），每一条对应的最相关的新冠疫情事件（Top5）。
#第四阶段，将新冠疫情主题事件通过语义角色标注的方法，获取每一条事件的属性，主要包括施事者(causer)、受事者(patient)和谓语动词(predicate)。
#第五阶段，梳理和重构2022年内发生的与新冠疫情主题相关的事件，整理出一条故事脉络，更清晰地看出这些事件间的关联。

# 第一阶段：
# 读取csv文件
df = pd.read_csv('./z疫情csv/7SH_cleaned.csv')
# 将"result"列转换为文本矩阵
vectorizer = CountVectorizer()
X = vectorizer.fit_transform(df['result'])
# 计算相似度矩阵
similarity_matrix = cosine_similarity(X)
# 获取相似度大于0.8的新闻的下标
# 删除相似度大于0.8的新闻
df.drop(df.index[duplicates], inplace=True)
# 保存结果到新的csv文件
df.to_csv('./z疫情csv/7SH_Ccleaned.csv', index=False)
# 第二阶段：
将政策句子和新闻事件句子都使用sentence_bert进行编码，然后输出两者的语义相似度（cos_similarity）。
# 输出的结果：
| id | topic | task | policy | news_event |
|----|-------|------|--------|-----|
| 0 |新冠疫情| 政策与新冠疫情语义相似度| 二是进一步优化核酸检测。不按行政区域开展全员核酸检测，进一步缩小核酸检测范围、减少频次。根据防疫工作需要，可开展抗原检测。对高风险岗位从业人员和高风险区人员按照有关规定进行核酸检测，其他人员愿检尽检。除养老院、福利院、医疗机构、托幼机构、中小学等特殊场所外，不要求提供核酸检测阴性证明，不查验健康码。重要机关、大型企业及一些特定场所可由属地自行确定防控措施。不再对跨地区流动人员查验核酸检测阴性证明和健康码，不再开展落地检。 |优化落实疫情防控“新十条”发布春节前夕机票搜索量猛增12月7日，国务院联防联控机制发布《关于进一步优化落实新冠肺炎疫情防控措施的通知》，包括不再对跨地区流动人员查验核酸检测阴性证明和健康码，不再开展落地检等新措施。业内人士称，消息发布后，携程平台上的机票瞬时搜索量猛增160，其中，春节前夕的机票搜索量暴涨至三年以来最高点。|

# 第三阶段：
同样使用sentence_bert进行编码，语义相似度计算为cos_similarity，最后的输出变为了Top5个新闻事件。
# 输出的例子：
| id | topic | task | policy | news_events|
|----|-------|------|--------|-----|
| 0 |新冠疫情| 政策与新冠疫情语义搜索|三是优化调整隔离方式。感染者要科学分类收治，具备居家隔离条件的无症状感染者和轻型病例一般采取居家隔离，也可自愿选择集中隔离收治。居家隔离期间加强健康监测，隔离第6、7天连续2次核酸检测Ct值≥35解除隔离，病情加重的及时转定点医院治疗。具备居家隔离条件的密切接触者采取5天居家隔离，也可自愿选择集中隔离，第5天核酸检测阴性后解除隔离。|No1.杭马最新通知：所有参赛人员赛后落实3天3检，24小时内未检测的将赋黄码刚刚，杭州马拉松发布赛后疫情防控须知：根据疫情防控相关规定，参加一汽奥迪·2022杭州马拉松的所有人员在赛后要落实三天三检。即您需要自本届一汽奥迪·2022杭州马拉松赛结束起连续3天，每天进行1次核酸检测，24小时内未检测的将赋黄码，采样后可自行转绿码。 (Score: 0.7784)No2.重磅！密切接触者“73”管理措施调整为“53”健康中国消息11月11日，国务院应对新型冠状病毒肺炎疫情联防联控机制综合组发布了《关于进一步优化新冠肺炎疫情防控措施科学精准做好防控工作的通知》，其中提到：对密切接触者，将7天集中隔离3天居家健康监测管理措施调整为5天集中隔离3天居家隔离，期间赋码管理、不得外出。集中隔离医学观察的第1、2、3、5天各开展1次核酸检测，居家隔离医学观察第1、3天各开展1次核酸检测。 (Score: 0.7664)No3.多条防疫新规发布携程平台机票搜索量环比增长超1倍11月11日，国家卫健委发布《关于进一步优化新冠肺炎疫情防控措施科学精准做好防控工作的通知》。其中明确提出，将风险区由高、中、低三类调整为高、低两类，最大限度减少管控人员，此外，对密切接触者，将7天集中隔离3天居家健康监测管理措施调整为5天集中隔离3天居家隔离。 (Score: 0.7658)No4.新冠疫苗尚未覆盖3岁以内婴幼儿，如何减少这类人群感染徐翼表示，儿童是新冠病毒的易感人群，从目前国内外儿童新冠病毒感染病例来看，儿童感染病例临床症状绝大多数比较轻，发热时间不长，一般3至5天很快恢复，主要有发热、咳嗽、乏力、呕吐和腹泻等症状。广州本轮疫情本土感染者已超过16万例，其中3岁以下婴幼儿已超过1700例。 (Score: 0.7617)No5.亳州市积极部署低温寒潮天气应对工作当前，亳州市正迎来入冬第一次寒潮天气，为做好防范应对工作，亳州市委、市政府高度重视，第一时间就做好此次寒潮天气防范应对工作进行专门部署，要求各地各部门采取有效措施做好防范应对工作，确保全市人民群众生命财产安全和正常生产生活秩序。根据气象部门预报，受强寒潮天气影响，11月28-30日全市有一次大风、强降温和降水天气过程，偏北风增大到4-5级、阵风7到8级。 (Score: 0.7549)|
